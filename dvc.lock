schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/hdb-resale-price-index.csv
      md5: 039e3ad31e70306631040be148225e7e
      size: 1879
    - path: data/raw_data/transactions_1.txt
      md5: 4d623da33450f3ee3be2bff1c5cf243a
      size: 5173788
    - path: data/raw_data/transactions_2.txt
      md5: 6aec9b6e1977eba002386caa287d221c
      size: 6755899
    - path: data/raw_data/transactions_3.txt
      md5: 02acf88629b42c674709012c3c874ebe
      size: 11833026
    - path: data/raw_data/transactions_4.txt
      md5: 19f340a41a01b0598d1f059dc0ab3aff
      size: 4551012
    - path: src/preprocess.py
      md5: f84aefc1ecb09e389945ceee10e73b8a
      size: 10373
    outs:
    - path: data/clean_data.csv
      md5: f9c6b5c4af14d4b4ece4aeb401838b91
      size: 1463478
  eda:
    cmd: python src/eda.py
    deps:
    - path: data/clean_data.csv
      md5: f9c6b5c4af14d4b4ece4aeb401838b91
      size: 1463478
    - path: src/eda.py
      md5: 948d4534762fdde178605693114db05f
      size: 435
    outs:
    - path: data/pandas_profiling_report.html
      md5: 6119fc262ca85e8471393dd20568a73b
      size: 3278336
  run_experiment:
    cmd: python src/run_experiment.py 0.1 100 6 1 0.0 1.0 1.0 0.0 1.0 gbtree
    deps:
    - path: src/run_experiment.py
      md5: f9f858d3368c0c7b02a57b8d00f6f56c
      size: 1812
    - path: src/train.py
      md5: ba5c921a59f92bc88243332557cd854d
      size: 2570
    params:
      params.yaml:
        train.booster: gbtree
        train.colsample_bytree: 1.0
        train.gamma: 0.0
        train.learning_rate: 0.1
        train.max_depth: 6
        train.min_child_weight: 1
        train.n_estimators: 100
        train.reg_alpha: 0.0
        train.reg_lambda: 1.0
        train.subsample: 1.0
    outs:
    - path: experiment_models
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  extract:
    cmd: sh src/extract/extract_data.sh
    outs:
    - path: data/raw_data/transactions_1.txt
      md5: 4d623da33450f3ee3be2bff1c5cf243a
      size: 5173788
    - path: data/raw_data/transactions_2.txt
      md5: 6aec9b6e1977eba002386caa287d221c
      size: 6755899
    - path: data/raw_data/transactions_3.txt
      md5: 02acf88629b42c674709012c3c874ebe
      size: 11833026
    - path: data/raw_data/transactions_4.txt
      md5: 19f340a41a01b0598d1f059dc0ab3aff
      size: 4551012
  interpret:
    cmd: python src/interpret.py
    deps:
    - path: data/clean_data.csv
      md5: f9c6b5c4af14d4b4ece4aeb401838b91
      size: 1463478
    - path: models/best_pipeline.pkl
      md5: 554208820951c8bbaceee0c9efa09766
      size: 2073132
    - path: src/interpret.py
      md5: f5ae5d3be3ff30f23d134cb463519a08
      size: 1764
    outs:
    - path: models/explainer.pkl
      md5: 87d8753795b8bbeeefccc35a4c7fe4a8
      size: 7987293
    - path: models/shap_summary_plot.png
      md5: 4666f02881041f1cd8feefed2e754f90
      size: 68194
  train:
    cmd: python src/train.py
    deps:
    - path: data/clean_data.csv
      md5: f9c6b5c4af14d4b4ece4aeb401838b91
      size: 1463478
    - path: src/train.py
      md5: ba5c921a59f92bc88243332557cd854d
      size: 2570
    outs:
    - path: models/pipeline.pkl
      md5: 525e359b461cee327c54b41afd861c4c
      size: 262040
  optimize:
    cmd: python src/optimize.py
    deps:
    - path: data/clean_data.csv
      md5: f9c6b5c4af14d4b4ece4aeb401838b91
      size: 1463478
    - path: models/pipeline.pkl
      md5: 525e359b461cee327c54b41afd861c4c
      size: 262040
    - path: src/optimize.py
      md5: 49dd273174f28605554a7baed7fdef28
      size: 3687
    outs:
    - path: models/best_pipeline.pkl
      md5: 554208820951c8bbaceee0c9efa09766
      size: 2073132
  monitor:
    cmd: python src/monitor.py
    deps:
    - path: data/clean_data.csv
      md5: f9c6b5c4af14d4b4ece4aeb401838b91
      size: 1463478
    - path: src/monitor.py
      md5: d697a4170bad73eacee9e622b01b2f79
      size: 1378
    outs:
    - path: monitor/data_drift.html
      md5: f9e65e2fedb9fa652bee705dc88ac5cf
      size: 4147491
